# Каталог знайдених багів

## BUG-001: Продаж у борг не відображається в щоденному звіті

### Опис
Продаж товарів із способом оплати "Борг" відображається в звіті зарплати майстра, але не відображається в щоденному підсумку записів.

### Деталі бага
- **URL проблеми:** `http://127.0.0.1:5000/appointments/daily-summary?date=2025-06-01&master_id=4`
- **Очікувана поведінка:** Продаж має відображатися в щоденному звіті
- **Фактична поведінка:** Продаж відсутній у щоденному звіті
- **Дата виявлення:** 2025-01-27
- **Статус:** Виправлено
- **Пріоритет:** Високий

### Коренева причина
Щоденний звіт використовував запит тільки для `Appointment`, але не включав `Sale` з бази даних.

### Виправлення
Додано логіку в `app/routes/appointments.py` (функція `daily_summary`) для включення продажів товарів:
```python
# Запит для продажів товарів за день  
from app.models import Sale
sales_query = Sale.query.filter(func.date(Sale.sale_date) == filter_date)
```

### Regression тест
- **Файл:** `tests/automation/regression_tests.py`
- **Тест:** `test_debt_sale_appears_in_daily_summary`
- **Тест:** `test_report_consistency_between_salary_and_daily`

### Уроки
1. **Інтеграційне тестування:** Потрібно тестувати взаємодію між модулями
2. **Консистентність звітів:** Потрібно перевіряти, що всі звіти показують одні й ті ж дані
3. **Покриття способів оплати:** Потрібно тестувати всі способи оплати в усіх сценаріях

---

## Шаблон для нових багів

### BUG-XXX: [Короткий опис]

#### Опис
[Детальний опис проблеми]

#### Деталі бага
- **URL проблеми:** 
- **Очікувана поведінка:** 
- **Фактична поведінка:** 
- **Дата виявлення:** 
- **Статус:** [Новий/В роботі/Виправлено/Закрито]
- **Пріоритет:** [Низький/Середній/Високий/Критичний]

#### Кроки для відтворення
1. 
2. 
3. 

#### Коренева причина
[Опис причини бага]

#### Виправлення
[Опис виправлення]

#### Regression тест
- **Файл:** 
- **Тест:** 

#### Уроки
[Що можна покращити в тестуванні]

---

## Статистика

- **Всього багів:** 1
- **Виправлено:** 1
- **Відкритих:** 0
- **Regression тестів створено:** 2

## Типи багів за категоріями

### Інтеграція між модулями
- BUG-001: Продаж у борг не відображається в щоденному звіті

### UI/UX
- _Поки немає_

### Бізнес-логіка
- _Поки немає_

### Продуктивність
- _Поки немає_

---

**Останнє оновлення:** 2025-01-27 